generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model users {
  id                               Int                      @id @default(autoincrement()) @db.UnsignedInt
  first_name                       String                   @db.VarChar(50)
  last_name                        String?                  @db.VarChar(50)
  image                            String?                  @db.VarChar(200)
  phone                            String?                  @db.VarChar(20)
  email                            String                   @unique(map: "users_email_unique") @db.VarChar(50)
  password                         String                   @db.Text
  role                             users_role
  store_id                         Int?
  status                           Int
  highlevel_franchise_access_token String?                  @db.Text
  highlevel_franchise_form_id      String?                  @db.Text
  reset_token                      String?                  @db.VarChar(255)
  reset_token_expiry               DateTime?                @db.Timestamp(0)
  is_deleted                       DateTime?                @db.Timestamp(0)
  created_at                       DateTime?                @default(now()) @db.Timestamp(0)
  updated_at                       DateTime?                @default(now()) @db.Timestamp(0)
  quickbooks_connections           quickbooks_connections[]
  stores                           stores?                  @relation(fields: [store_id], references: [id], onUpdate: NoAction, map: "fk_users_store")

  @@index([store_id], map: "fk_users_store")
}

model site_settings {
  id             Int      @id @default(autoincrement()) @db.UnsignedInt
  site_key       String   @unique(map: "unique_site_key") @db.VarChar(20)
  site_name      String   @db.VarChar(50)
  site_logo      String?  @db.VarChar(200)
  site_favicon   String?  @db.VarChar(200)
  short_intro    String?  @db.Text
  copyright_text String?  @db.Text
  created_at     DateTime @default(now()) @db.Timestamp(0)
  updated_at     DateTime @default(now()) @db.Timestamp(0)
}

model cms_pages {
  id         Int               @id @default(autoincrement()) @db.UnsignedInt
  page_key   String            @unique(map: "unique_page_key") @db.VarChar(20)
  slug       String            @unique(map: "slug") @db.VarChar(255)
  title      String            @db.VarChar(255)
  sections   Json?
  meta       Json?
  status     cms_pages_status? @default(draft)
  created_at DateTime?         @default(now()) @db.Timestamp(0)
  updated_at DateTime?         @default(now()) @db.Timestamp(0)
}

model services {
  id                Int       @id @default(autoincrement())
  service_name      String    @db.VarChar(255)
  service_slug      String?   @db.VarChar(255)
  short_description String?   @db.Text
  icon              String?   @db.VarChar(255)
  image             String?   @db.VarChar(255)
  highlights        Json?
  layout_code       String?   @db.VarChar(20)
  sections          Json?
  status            Int       @default(1) @db.TinyInt
  created_at        DateTime  @default(now()) @db.Timestamp(0)
  updated_at        DateTime  @default(now()) @db.Timestamp(0)
  deleted_at        DateTime? @db.Timestamp(0)
}

model blogs {
  id         Int       @id @default(autoincrement())
  title      String    @db.VarChar(255)
  slug       String    @unique(map: "slug") @db.VarChar(255)
  excerpt    String?   @db.Text
  content    String?   @db.LongText
  image      String?   @db.VarChar(500)
  status     Int       @default(1) @db.TinyInt
  created_at DateTime? @default(now()) @db.DateTime(0)
  updated_at DateTime? @default(now()) @db.DateTime(0)
  deleted_at DateTime? @db.DateTime(0)
}

model partners {
  id           Int       @id @default(autoincrement())
  partner_name String    @db.VarChar(255)
  image        String?   @db.VarChar(255)
  description  String?   @db.LongText
  status       Int       @default(1) @db.TinyInt
  created_at   DateTime? @default(now()) @db.Timestamp(0)
  updated_at   DateTime? @default(now()) @db.Timestamp(0)
  deleted_at   DateTime? @db.Timestamp(0)
}

model faqs {
  id             Int       @id @default(autoincrement())
  question       String    @db.VarChar(500)
  answer         String?   @db.LongText
  show_on_stores Boolean   @default(false)
  service_id     Int?
  status         Int       @default(1) @db.TinyInt
  created_at     DateTime? @default(now()) @db.Timestamp(0)
  updated_at     DateTime? @default(now()) @db.Timestamp(0)
  deleted_at     DateTime? @db.Timestamp(0)
}

model stores {
  id                    Int       @id @default(autoincrement())
  store_name            String    @db.VarChar(255)
  store_slug            String?   @db.VarChar(255)
  store_address         String?   @db.VarChar(255)
  image                 String?   @db.VarChar(255)
  sections              Json?
  contact_us            Json?
  social_links          Json?
  settings              Json?
  is_primary_store      Boolean   @default(false)
  highlevel_location_id String?   @db.Text
  highlevel_api_key     String?   @db.Text
  status                Int       @default(1) @db.TinyInt
  created_at            DateTime  @default(now()) @db.Timestamp(0)
  updated_at            DateTime  @default(now()) @db.Timestamp(0)
  deleted_at            DateTime? @db.Timestamp(0)
  users                 users[]
}

model quickbooks_connections {
  id                   Int      @id @default(autoincrement()) @db.UnsignedInt
  user_id              Int      @db.UnsignedInt
  realm_id             String   @db.VarChar(100)
  company_name         String?  @db.VarChar(255)
  access_token         String   @db.Text
  refresh_token        String   @db.Text
  access_token_expires DateTime @db.Timestamp(0)
  environment          String   @default("sandbox") @db.VarChar(20)
  created_at           DateTime @default(now()) @db.Timestamp(0)
  updated_at           DateTime @default(now()) @db.Timestamp(0)
  users                users    @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_quickbooks_user")

  @@unique([user_id, realm_id], map: "unique_user_realm")
  @@index([user_id], map: "idx_quickbooks_user")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model ghl_custom_fields {
  id           Int       @id @default(autoincrement())
  location_id  String    @db.VarChar(255)
  ghl_field_id String?   @db.VarChar(100)
  name         String?   @db.VarChar(500)
  field_key    String?   @db.VarChar(255)
  created_at   DateTime? @default(now()) @db.Timestamp(0)
  updated_at   DateTime? @default(now()) @db.Timestamp(0)

  @@unique([location_id, field_key], map: "unique_location_field_key")
  @@index([location_id], map: "idx_location_id")
}

enum users_role {
  super_admin
  store_admin
}

enum cms_pages_status {
  published
  draft
}
